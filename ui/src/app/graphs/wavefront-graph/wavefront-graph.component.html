<div #chartContainer class="chart-container">
  <div *ngIf="!dataLoaded" class="loading-overlay">
    <div class="spinner-spacer"></div>
    <clr-spinner class="spinner"></clr-spinner>
  </div>
  <div *ngIf="noData" class="nodata-overlay">
    <div class="nodata-spacer"></div>
    <div class="nodata-text">NO DATA</div>
  </div>
  <div #timeSpanPick class="timespan-pick">
    <div class="timespan-pick-button" (click)="timeSpanOverride('5m', $event)">5m</div>
    <div class="timespan-pick-button" (click)="timeSpanOverride('30m', $event)">30m</div>
    <div class="timespan-pick-button" (click)="timeSpanOverride('2h', $event)">2h</div>
    <div class="timespan-pick-button" (click)="timeSpanOverride('1d', $event)">1d</div>
    <div class="timespan-pick-button" (click)="timeSpanOverride('8d', $event)">8d</div>
  </div>
  <div #titleDiv class="title">{{ graphConfig?.title }}</div>
  <div #descriptionDiv class="details">{{ graphConfig?.description }}</div>
  <div *ngIf="graphData?.length == 0" class="no-data"><div class="no-data-inner">NO DATA</div></div>
  <ngx-charts-line-chart
    [scheme]="colorScheme"
    [view]="graphConfig?.view"
    [legend]="graphConfig?.legend"
    [showXAxisLabel]="graphConfig?.showXAxisLabel"
    [showYAxisLabel]="graphConfig?.showYAxisLabel"
    [showGridLines]="graphConfig?.showGridLines"
    [xAxis]="graphConfig?.xAxis"
    [yAxis]="graphConfig?.yAxis"
    [xAxisLabel]="graphConfig?.xAxisLabel"
    [yAxisLabel]="graphConfig?.yAxisLabel"
    [yScaleMin]="graphConfig?.yScaleMin"
    [yScaleMax]="graphConfig?.yScaleMax"
    [autoScale]="graphConfig?.autoScale"
    [timeline]="graphConfig?.timeline"
    [curve]="graphConfig?.curve"
    [animations]="graphConfig?.animation"

    [results]="graphData"

    [xAxisTickFormatting]="dateTickFormatting"

    (select)="onSelect($event)"
    (activate)="onActivate($event)"
    (deactivate)="onDeactivate($event)"
    >
    <ng-template #tooltipTemplate let-model="model">
      <div class="time-summary">{{ model.name }}</div>
      <table class="tooltip-series-table">
        <tr class="tooltip-series">
          <th></th>
          <th>{{ graphConfig?.target?.name }}</th>
          <th class="tooltip-series-value">Value</th>
        </tr>
        <tr class="tooltip-series">
          <td><div class="tooltip-series-color" [ngStyle]="applyToolTipColor(model.color)"></div></td>
          <td class="tooltip-series-tag">{{ model.mainTag }}</td>
          <td class="tooltip-series-value">{{ trimValue(model.value) }}</td>
        </tr>
      </table>
    </ng-template>
    <ng-template #seriesTooltipTemplate let-model="model">
      <div class="time-summary">{{ model[0].name }}</div>
      <table class="tooltip-series-table">
        <tr class="tooltip-series">
          <th></th>
          <th>{{ graphConfig?.target?.name }}</th>
          <th class="tooltip-series-value">Value</th>
        </tr>
        <div class="tooltip-divider-spacer"></div>
        <div class="tooltip-divider"></div>
        <tr *ngFor="let series of valueSort(model)" class="tooltip-series">
          <td><div class="tooltip-series-color" [ngStyle]="applyToolTipColor(series.color)"></div></td>
          <td class="tooltip-series-tag">{{ series.mainTag }}</td>
          <td class="tooltip-series-value">{{ trimValue(series.value) }}</td>
        </tr>
      </table>
    </ng-template>
  </ngx-charts-line-chart>
</div>