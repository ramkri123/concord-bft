<div>
  <table *ngIf="showParentBlock && parentBlock" class="table table-vertical no-top-margin parent-table">
    <tbody>
      <tr>
        <th class="legend">{{'transactions.blockLocation' | translate}}</th>
        <td>
          <span class="space-after-link">
            {{ 'transactions.locatedInBlock' | translate }} {{
              (parentBlock.number !== 0) ? parentBlock.number :
                ('0 (' + ('blocks.genesisBlock' | translate) + ')')
            }}
          </span>
          <br>
          <a [routerLink]="[parentBlockLink]" class="space-after-link">
            {{ parentBlock.hash }}
          </a>
          <concord-copy-to-clipboard-button
            classList="ctc-btn-inline"
            [tooltip]="'common.copyToClip' | translate"
            tooltipDirection="top-right"
            [value]="parentBlock?.hash"
            [size]="12">
          </concord-copy-to-clipboard-button>
        </td>
      </tr>
    </tbody>
  </table>
  <table class="table table-vertical no-top-margin">
    <tbody>
    <tr>
      <th class="legend">{{'transactions.txhash' | translate}}</th>
      <td>
        <a [routerLink]="[transactionLink]" class="space-after-link">{{transaction?.hash}}</a>
        <concord-copy-to-clipboard-button
          classList="ctc-btn-inline"
          [tooltip]="'common.copyToClip' | translate"
          tooltipDirection="top-right"
          [value]="transaction?.hash"
          [size]="12">
        </concord-copy-to-clipboard-button>
      </td>
    </tr>
    <tr>
      <th class="legend">{{'transactions.from' | translate}}</th>
      <td>
        {{transaction?.from}}
        <concord-copy-to-clipboard-button
          classList="ctc-btn-inline"
          [tooltip]="'common.copyToClip' | translate"
          tooltipDirection="top-right"
          [value]="transaction?.from"
          [size]="12">
        </concord-copy-to-clipboard-button>
      </td>
    </tr>
    <tr *ngIf="transaction?.to">
      <th class="legend">{{'transactions.to' | translate}}</th>
      <td>
        <span *ngIf="!associatedContractLink" class="space-after-link">
          {{transaction?.to}}
        </span>
        <span *ngIf="associatedContractLink" class="space-after-link">
          <span class="contract-label">{{'transactions.contract' | translate}}</span>
          <a [routerLink]="[associatedContractLink]">{{transaction?.to}}</a>
        </span>
        <concord-copy-to-clipboard-button
          classList="ctc-btn-inline"
          [tooltip]="'common.copyToClip' | translate"
          tooltipDirection="top-right"
          [value]="transaction?.to"
          [size]="12">
        </concord-copy-to-clipboard-button>
        <div *ngIf="associatedContractLink" class="registered-as">
          ({{'transactions.associatedContractRegisteredAs' | translate}}: 
          <a [routerLink]="[associatedContractLink]">{{ contractInfo.contract_id }} :: {{ contractData.version }}</a>)
        </div>
      </td>
    </tr>
    <tr *ngIf="transaction?.contract_address">
      <th class="legend">{{'transactions.contractAddress' | translate}}</th>
      <td>
        <a *ngIf="associatedContractLink" [routerLink]="[associatedContractLink]">
          {{transaction?.contract_address}}
        </a>
        <span *ngIf="!associatedContractLink">
          {{transaction?.contract_address}}
        </span>
        <concord-copy-to-clipboard-button
          classList="ctc-btn-inline"
          [tooltip]="'common.copyToClip' | translate"
          tooltipDirection="top-right"
          [value]="transaction?.contract_address"
          [size]="12">
        </concord-copy-to-clipboard-button>
      </td>
    </tr>
    <tr>
        <th class="legend">{{'transactions.status' | translate}}</th>
          <td>
            <ng-container [ngSwitch]="transaction?.status">
              <ng-container *ngSwitchCase="1">
                <span class="label label-success">
                  {{'transactions.success' | translate}}
                </span>
              </ng-container>
              <ng-container *ngSwitchCase="0">
                <span class="label label-danger">
                  {{ 'transactions.failure' | translate }}
                </span>
              </ng-container>
              <ng-container *ngSwitchDefault>
                {{ 'transactions.none' | translate }}
              </ng-container>
            </ng-container>
          </td>
        </tr>
    <tr *ngIf="transaction?.value && (transaction.value != '0x0')">
      <th class="legend">{{'transactions.value' | translate}}</th>
      <td>{{transaction?.value}}</td>
    </tr>
    <tr *ngIf="transaction?.input">
      <th class="legend">{{'transactions.input' | translate}}</th>
      <td>
        <clr-dropdown>
          <clr-dropdown [clrCloseMenuOnItemClick]="true">
            <button clrDropdownTrigger class="no-border">
                {{ inputViewName | translate }}
                <clr-icon shape="caret down"></clr-icon>
            </button>
            <clr-dropdown-menu *clrIfOpen class="inline">
              <div *ngIf="!contractNotFound || !isSmartContract" clrDropdownItem (click)="chooseInputView('default')">
                {{ 'transactions.inputView.default' | translate }}
              </div>
              <!-- EVM package removed, needs alternative -->
              <!-- <div *ngIf="isSmartContract" clrDropdownItem (click)="chooseInputView('decompile')">
                {{ 'transactions.inputView.decompile' | translate }}
              </div>
              <div *ngIf="isSmartContract" clrDropdownItem (click)="chooseInputView('opcode')">
                  {{ 'transactions.inputView.opcode' | translate }}
              </div> -->
              <div clrDropdownItem (click)="chooseInputView('original')">
                {{ 'transactions.inputView.original' | translate }}
              </div>
              <div clrDropdownItem (click)="chooseInputView('utf8')">
                {{ 'transactions.inputView.utf8' | translate }}
              </div>
            </clr-dropdown-menu>
            <concord-copy-to-clipboard-button
              classList="ctc-btn-inline"
              [tooltip]="'common.copyToClip' | translate"
              tooltipDirection="top-right"
              [value]="decodedInput"
              [size]="12">
            </concord-copy-to-clipboard-button>
          </clr-dropdown>
        </clr-dropdown>
        <concord-code-highlighter #codeBlock
          [textToHighlight]="decodedInput" [language]="codeHighlighterLanguage" 
          [breakWord]="true" [maxHeight]="codeBlockMaxHeight" [plugins]="codeHighlighterPlugins">
        </concord-code-highlighter>
      </td>
    </tr>
    <tr>
      <th class="legend">{{'transactions.nonce' | translate}}</th>
      <td>{{transaction?.nonce}}</td>
    </tr>
    </tbody>
  </table>
</div>
